<!DOCTYPE html>
<html lang="en">
<head>

  <!-- PWA / Add to Homescreen icon -->
<link rel="icon" type="image/png" sizes="192x192" href="https://static.vecteezy.com/system/resources/previews/060/389/416/non_2x/arbor-day-a-cartoon-tree-on-a-green-background-free-vector.jpg">
<link rel="apple-touch-icon" href="https://static.vecteezy.com/system/resources/previews/060/389/416/non_2x/arbor-day-a-cartoon-tree-on-a-green-background-free-vector.jpg">

<link rel="manifest" href="manifest.json">

  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Save God's Green Earth: üåø Eco Knowledge</title>
<style>
:root{
  --green:#4CAF50;
  --dark:#123;
  --light-bg:#fcfff8;
  --card-bg:#A8E6CF;
  --hover-bg:#f3fff3;
  --blue-accent: rgba(30,144,255,0.55);
}

/* layout & typography */
*{box-sizing:border-box}
body { font-family: Arial, sans-serif; margin:0; padding:0; line-height:1.55; color:var(--dark); background:var(--light-bg); -webkit-text-size-adjust:100%; }
header {
  background:var(--green);
  color:white;
  padding:10px 8px;
  text-align:center;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  position:sticky;
  top:0;
  z-index:60;
  border-bottom: 4px solid var(--blue-accent);
}
nav { display:flex; justify-content:center; gap:6px; overflow-x:auto; white-space:nowrap; margin-top:6px; -webkit-overflow-scrolling:touch; }

/* SMALLER NAV BUTTONS - adjusted sizes */
.nav-btn {
  flex:0 0 auto;
  color:white;
  background:transparent;
  border:none;
  padding:6px 8px;          /* smaller padding */
  font-weight:700;
  font-size:0.88rem;       /* smaller font */
  cursor:pointer;
  touch-action:manipulation;
  -webkit-tap-highlight-color: rgba(255,255,255,0.12);
}

/* cartoony nav buttons (also slightly reduced padding) */
.nav-btn.cartoon {
  font-family: "Comic Sans MS", "Comic Neue", "Segoe Print", "Marker Felt", "Chalkboard", sans-serif;
  transform: skewX(-6deg);
  letter-spacing: 0.5px;
  text-shadow: 2px 2px 0 rgba(0,0,0,0.18), -1px -1px 0 rgba(255,255,255,0.06);
  padding:6px 10px;        /* smaller */
  background: rgba(255,255,255,0.04);
  border-radius:8px;
}
.nav-btn:active { transform:translateY(1px); opacity:.95; }

main { padding:14px; max-width:980px; margin:auto; min-height:60vh; overflow-x:hidden; word-wrap:break-word; }
footer {
  background:#2E7D32;
  color:white;
  text-align:center;
  padding:12px;
  margin-top:18px;
  font-size:.88rem;
  border-top: 4px solid var(--blue-accent);
}
.footer-credits.cartoon {
  display:inline-block;
  font-family: "Comic Sans MS", "Comic Neue", "Segoe Print", "Marker Felt", "Chalkboard", sans-serif;
  transform: skewX(-4deg);
  letter-spacing:0.5px;
  text-shadow: 2px 2px 0 rgba(0,0,0,0.18);
  padding:6px 10px;
  border-radius:8px;
  background: rgba(255,255,255,0.03);
}

/* grid/cards */
.grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px; }

/* CARDS: thicker black outline */
.card {
  background:var(--card-bg);
  padding:16px;
  text-align:center;
  border-radius:8px;
  transition: transform .25s, box-shadow .25s;
  border: 3px solid rgba(0,0,0,0.85);
}
.card:hover { transform:scale(1.03); box-shadow:0 6px 18px rgba(0,0,0,0.08); }

/* details: green left accent + thicker black outline */
details {
  background:#f6fff6;
  padding:12px;
  margin:10px 0;
  border-radius:8px;
  border: 2.5px solid rgba(0,0,0,0.85);
  border-left: 8px solid #bde9b7;
}
summary { font-weight:700; cursor:pointer; outline:none; }

/* images framed: black outer + inner green border */
.img-frame {
  display:block;
  width:100%;
  border:4px solid rgba(0,0,0,0.95);
  padding:6px;
  border-radius:10px;
  background: #fff;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  margin-bottom:12px;
}
.img-frame img {
  display:block;
  width:100%;
  height:auto;
  border-radius:6px;
  border:5px solid var(--green);
  box-sizing: border-box;
}
.img-frame-small{
  display:block;
  width:100%;
  border:3px solid rgba(0,0,0,0.95);
  padding:5px;
  border-radius:8px;
  background:#fff;
  margin-bottom:8px;
}
.img-frame-small img{
  width:100%;
  height:auto;
  border-radius:6px;
  border:4px solid var(--green);
}

/* buttons & quiz */
button { padding:10px 14px; background:var(--green); color:white; border:none; border-radius:6px; cursor:pointer; font-weight:700; touch-action:manipulation; }
button[disabled] { opacity:.5; cursor:not-allowed; }
.quiz-btns button { width:100%; text-align:left; padding:14px; background:#fff; border:1px solid #e6efe6; border-radius:8px; margin-bottom:10px; cursor:pointer; font-size:1.05rem; color:var(--dark); transition: background .18s; touch-action:manipulation; -webkit-tap-highlight-color: rgba(0,0,0,0.06); }
.quiz-btns button:hover { background:var(--hover-bg); }
.quiz-btns button:active { transform:translateY(1px); }
.quiz-btns button:disabled { opacity:0.6; cursor:not-allowed; }

#feedback { margin-top:12px; font-weight:700; min-height:1.4em; }
#progress { font-weight:700; margin-top:8px; }

.cartoon-title {
  font-family: "Comic Sans MS", "Comic Neue", "Segoe Print", "Marker Felt", "Chalkboard", sans-serif;
  letter-spacing: 1px;
  font-size:1.35rem;
  text-shadow: 2px 2px 0 rgba(0,0,0,0.18), 0 2px 0 rgba(30,144,255,0.12);
  display:inline-block;
  transform: skewX(-4deg);
  padding:6px 10px;
  border-radius:8px;
  background: rgba(255,255,255,0.03);
}

/* Before/After layout */
.before-after {
  display:flex;
  gap:12px;
  align-items:flex-start;
  margin-top:18px;
}
.before-after .col { flex:1; }
.before-after h3 { font-size:1.05rem; margin:6px 0; font-weight:900; text-transform:uppercase; letter-spacing:1px; }

/* hide/show pages */
.hidden { display:none; }

/* STAR popup (keeps top star behavior) */
.star-popup { position:fixed; left:50%; top:26%; transform:translate(-50%,-50%) scale(0); font-size:3.2rem; pointer-events:none; opacity:0; z-index:9999; transition: transform .28s ease-out, opacity .28s ease-out; text-align:center; }
.star-popup.bounce { animation: bounce 0.8s ease-out forwards; }
@keyframes bounce { 0% {transform:translate(-50%,-50%) scale(0);} 50% {transform:translate(-50%,-62%) scale(1.4);} 70% {transform:translate(-50%,-56%) scale(1);} 100% {transform:translate(-50%,-50%) scale(1);} }

/* WARNING popup (bottom center, slide/pop) */
.warning-popup {
  position:fixed;
  left:50%;
  bottom:6%;
  transform:translateX(-50%) translateY(18px);
  opacity:0;
  z-index:99999;
  background: rgba(255,255,255,0.98);
  color:#c62828;
  padding:10px 14px;
  border-radius:10px;
  box-shadow: 0 8px 26px rgba(0,0,0,0.18);
  font-weight:700;
  pointer-events:none;
  transition: transform .28s ease-out, opacity .28s ease-out;
  display:inline-block;
  min-width:200px;
  text-align:center;
  border: 2px solid rgba(0,0,0,0.85);
}
.warning-popup.show {
  transform:translateX(-50%) translateY(0);
  opacity:1;
  animation: popIn .6s cubic-bezier(.2,.8,.2,1);
}
@keyframes popIn {
  0% { transform:translateX(-50%) translateY(18px) scale(.96); opacity:0; }
  60% { transform:translateX(-50%) translateY(-6px) scale(1.04); opacity:1; }
  100% { transform:translateX(-50%) translateY(0) scale(1); opacity:1; }
}

@media(max-width:920px){
  .grid { grid-template-columns:1fr; }
  .before-after { flex-direction:column; }
}
@media(max-width:720px){
  main { padding:12px; }
  .star-popup{font-size:2.4rem;}
  .warning-popup { bottom:4%; left:50%; min-width:160px; padding:8px 10px; }
  .quiz-btns button { font-size:1rem; padding:12px; }
  .nav-btn { font-size:0.82rem; padding:6px 8px; } /* slightly smaller on very small screens */
  .nav-btn.cartoon { padding:6px 8px; }
}
</style>
</head>
<body>

<header>
  <h1 class="cartoon-title">Save God's Green Earth: üåø Eco Knowledge</h1>
  <nav aria-label="Main navigation">
    <button class="nav-btn cartoon" id="nav-home" aria-controls="home">Home</button>
    <button class="nav-btn cartoon" id="nav-about" aria-controls="about">About</button>
    <button class="nav-btn cartoon" id="nav-reviewer" aria-controls="reviewer">Reviewer</button>
    <button class="nav-btn cartoon" id="nav-resources" aria-controls="resources">Resources</button>
    <button class="nav-btn cartoon" id="nav-quiz" aria-controls="quiz">Quiz</button>
  </nav>
</header>

<!-- Floating star (top) -->
<div id="star" class="star-popup" aria-hidden="true">‚≠ê</div>
<!-- WARNING moved to bottom center -->
<div id="warningPopup" class="warning-popup" aria-hidden="true">You can't do this action right now! You are in a quiz!</div>

<main id="app">
  <!-- HOME -->
  <section id="home" class="page">
    <!-- hero image top replaced with Shutterstock thumbnail provided -->
    <div class="img-frame" aria-hidden="false">
      <img src="https://www.shutterstock.com/shutterstock/videos/3431590251/thumb/1.jpg?ip=x480" alt="Hero ‚Äî trees and environment">
    </div>

    <h2>Welcome to Save God's Green Earth: üåø Eco Knowledge</h2>

    <p><strong>Eco Action</strong> means making choices that protect our environment. Small daily actions ‚Äî recycling, conserving water, saving energy ‚Äî add up to a big impact.</p>

    <p>
      This Hub helps you learn simple, practical ways to care for our shared world. It explains what pollution is, why trash and waste are dangerous, and how everyday habits ‚Äî like using a reusable bottle, properly sorting waste, or joining a clean-up ‚Äî make a real difference.
    </p>

    <p>
      We include short lessons (the Reviewer), resources for deeper help (the Resources page), and a randomized Quiz to check what you remember. The goal is to give students and community members tools that are easy to use so good habits stick.
    </p>

    <p>
      Remember: caring for the earth is a team effort. Small actions done by many people add up. Schools, families, and barangay groups can use this site to plan real activities ‚Äî like composting drives or trash collections ‚Äî that create visible improvements in your neighborhood.
    </p>

    <h3 id="what-pollution">What is Pollution / Trash?</h3>
    <!-- image for pollution context (iStock) -->
    <div class="img-frame-small" aria-hidden="false">
      <img src="https://media.istockphoto.com/id/1139651150/photo/lonely-tree-growing-on-the-garbage-dump.jpg?s=612x612&w=0&k=20&c=jnISu8xkSSUPhaWmVIuGHHsq4tMNlp0n9xcwVJAXQsU=" alt="Tree on garbage dump ‚Äî shows trash and pollution">
    </div>

    <p>
      Pollution is anything that adds harmful substances or energy into the environment. Trash is one of the most visible forms ‚Äî from plastic bottles and wrappers to household waste and chemical runoff. When trash is left in streets, rivers, or fields it harms wildlife, clogs drainage, and can spread disease.
    </p>

    <p>
      Not all trash is the same: organic waste like food scraps can rot and produce methane (a greenhouse gas), while plastics can last for decades and break into microplastics that enter soils and waterways. Electronic waste and hazardous materials require special handling to avoid poisoning people or the environment.
    </p>

    <p>
      The good news: many solutions are practical. Reducing what we buy, reusing items, sorting recyclables correctly, joining local collection days, and avoiding burning trash all help reduce pollution quickly. Education and small community actions create momentum ‚Äî and this site is built to help you start.
    </p>

    <div class="grid" style="margin-top:16px;">
      <div class="card">üíß Save water ‚Äî short showers, fix leaks</div>
      <div class="card">‚ôªÔ∏è Recycle correctly ‚Äî clean & sort</div>
      <div class="card">üå± Plant trees ‚Äî native species</div>
      <div class="card">üö∂‚Äç‚ôÄÔ∏è Walk or bike short trips</div>
    </div>

    <!-- big Before Pollution / After Pollution with images -->
    <div style="margin-top:20px;">
      <h2 style="font-size:1.2rem; margin-bottom:8px;">Before Pollution  &nbsp;&nbsp;  After Pollution</h2>
      <div class="before-after">
        <div class="col">
          <h3>Before Pollution</h3>
          <div class="img-frame-small"><img src="https://www.dcmga.com/wp-content/uploads/assets/images/calendar/trees-calendar-image.jpg" alt="Before ‚Äî trees image"></div>
        </div>
        <div class="col">
          <h3>After Pollution</h3>
          <div class="img-frame-small"><img src="https://i.guim.co.uk/img/media/793773652a525be7099a25dbfcded46da45f54db/0_377_1121_673/master/1121.jpg?width=1200&height=900&quality=85&auto=format&fit=crop&s=58da5465987205af235fcfe107714b8b" alt="After ‚Äî cleaned / restored landscape"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="page hidden" aria-hidden="true">
    <!-- ABOUT top image replaced with Pinterest image requested earlier -->
    <div class="img-frame" aria-hidden="false">
      <img src="https://i.pinimg.com/736x/3c/f7/69/3cf7696ebeabef4d4cb99ff9426c6249.jpg" alt="Tree image for About (Pinterest)">
    </div>

    <h2>About This Website</h2>
    <p style="font-style:italic; font-size:.95rem; color:#333; margin-top:-6px;">Made by Frinz Kairon B. Manapat | 8 - Quisumbing</p>

    <p>This Eco Knowledge Hub was created to teach students and communities simple, practical ways to care for the environment. It focuses on everyday actions that anyone can do to reduce waste and pollution.</p>
    <p>Who it's for: students, teachers, families, and community leaders who want clear, short lessons and a quick quiz to check understanding. The content is written to be easy to read and apply in real life.</p>
    <p>Why it exists: to spread awareness about pollution, climate change, and resource conservation, and to turn awareness into habit. The site emphasizes small, repeatable actions because those are the ones students can realistically do every day.</p>
    <p>Educational goals: build knowledge (what pollution is), skills (how to separate waste, compost, conserve water), and attitudes (care for community spaces). The materials match common school project requirements: planning, building, testing, and reflecting.</p>
    <p>How to use the Hub: start on Home for an overview, expand Reviewer to study mini lessons, explore Resources for deeper guides and credits, then take the Quiz to test learning. Teachers can use the Reviewer as classroom reading and the Quiz for quick assessments.</p>
    <p>Community use: the site is also a guide for local clubs or student councils that want to run eco campaigns (e.g., a school clean-up, a recycling drive). Use the Resources section for printable checklists and local contact points.</p>

    <p><em>As a reflection, I realized that making websites is time consuming and difficult to make, even with support. But we must never learn to give up no matter what.</em></p>

    <!-- Barangay Information block -->
    <section aria-labelledby="barangay-info" style="background:#fff; padding:12px; border-radius:8px; margin-top:12px; border:3px solid rgba(0,0,0,0.85);">
      <h3 id="barangay-info">Barangay Information</h3>
      <p><strong>Barangay Number:</strong> 2</p>
      <p><strong>Barangay Location:</strong> Sangandaan, Caloocan, Metro Manila</p>
      <p><strong>Contact Information:</strong> 0977 022 3231</p>
      <p><strong>Gmail:</strong> barangaydosz1d1.caloocancity@gmail.com</p>

      <p><strong>Captain:</strong> Marlon Aquino</p>
      <p><strong>Kagawad:</strong> Eliseo "Bon" Dungao, Arlene Angeles, Aries G. Castro</p>

      <p><strong>BHW:</strong> Elisa R. Mendoza, Joshephine D. Tehada, Evangelin De Guzman, Evelyn C. Apostol, Angelyn Mae Gloria</p>

      <p><strong>Tanod:</strong> Ronald J. Gonzales, Manuel L. Montes</p>
    </section>

    <div class="grid" style="margin-top:14px;">
      <div class="card">üéØ Learn</div>
      <div class="card">üìö Explore</div>
      <div class="card">üìù Test</div>
      <div class="card">üåé Act</div>
    </div>
  </section>

  <!-- REVIEWER -->
  <section id="reviewer" class="page hidden" aria-hidden="true">
    <h2>Mini Lessons ‚Äî Step-by-Step</h2>
    <p><strong>How to use:</strong> Expand each mini lesson to read a short focused explanation (these do NOT show quiz answers). After reading them all, check the box and press Proceed to Quiz.</p>

    <details><summary>1. Handling litter safely</summary>
      <p>Prioritize safety. Wear gloves or use a bag, avoid sharp items, and move litter to the nearest bin. For hazardous waste, report to local authorities. Small clean-ups prevent pollution buildup and protect public spaces. Doing small tasks often builds community pride and sets an example for others.</p>
    </details>

    <details><summary>2. Recognizing recyclables</summary>
      <p>Clean paper, plastics, glass, and metal are often recyclable ‚Äî but local rules vary. Rinse containers to avoid contamination and separate mixed-material items. Correct sorting supports recycling systems and reduces landfill waste. If unsure, check local guidelines or the Resources page.</p>
    </details>

    <details><summary>3. Water-saving habits</summary>
      <p>Turn taps off while brushing, shorten showers, fix drips, and run full laundry/dish loads. Collect rainwater for gardening and water plants early to reduce evaporation. These simple habits can dramatically reduce household water use over time.</p>
    </details>

    <details><summary>4. Energy-saving habits</summary>
      <p>Switch off lights and electronics when not in use, use LED bulbs, and choose energy-efficient appliances. Consider small solar chargers where possible. Reducing electricity demand lowers greenhouse gas emissions and saves money.</p>
    </details>

    <details><summary>5. Reducing single-use plastics</summary>
      <p>Bring reusable bags, bottles, and containers. Buy in bulk when possible. Reducing disposable plastic keeps oceans and streets cleaner and reduces harm to wildlife. Encourage peers to adopt reusables by bringing extras for friends.</p>
    </details>

    <details><summary>6. Composting organic waste</summary>
      <p>Compost fruit and vegetable scraps, coffee grounds, and yard waste to create nutrient-rich soil. Composting reduces landfill waste, lowers methane emissions, and improves plant growth. Small worm bins or community compost spots are great starts.</p>
    </details>

    <details><summary>7. Eco-friendly transport</summary>
      <p>Walk, bike, carpool, or use public transport when possible. Reducing private car trips cuts air pollution and greenhouse gas emissions, and many times improves personal fitness too. Plan group trips to school to make this easier.</p>
    </details>

    <details><summary>8. Proper disposal of e-waste</summary>
      <p>Electronics contain recoverable and hazardous materials. Use official e-waste drop-off points or manufacturer take-back programs, and wipe personal data before recycling. Some schools partner with collection drives for safe disposal.</p>
    </details>

    <details><summary>9. Plant care & timing</summary>
      <p>Water plants in the early morning, focus on the root zone, and use mulch to retain moisture. Avoid overwatering; check soil moisture first. Planting native species reduces maintenance and helps local wildlife.</p>
    </details>

    <details><summary>10. Everyday pollution reduction</summary>
      <p>Avoid burning trash, dispose hazardous materials at proper facilities, reduce aerosol use, and support community clean-ups and tree planting. Small actions collectively improve local air and water quality and make public spaces nicer for everyone.</p>
    </details>

    <p style="margin-top:12px;"><label><input type="checkbox" id="read-check"> I have read all mini lessons (check to unlock Quiz)</label></p>
    <div class="center" style="margin-top:10px;">
      <button id="proceedBtn" disabled>Proceed to Quiz</button>
      <p style="margin-top:8px;"><button id="backHomeFromReviewer">Back to Home</button></p>
    </div>
  </section>

  <!-- RESOURCES -->
  <section id="resources" class="page hidden" aria-hidden="true">
    <h2>Resources & Credits</h2>
    <p>This page collects helpful guides, references, and credits used to build the Hub. Use the links and suggestions here to go deeper: printable checklists, local disposal contacts, and step-by-step guides for composting and recycling.</p>

    <p><strong>Image credits:</strong></p>
    <ul>
      <li>Hero (Home) image: Shutterstock (thumbnail provided by user).</li>
      <li>Pollution / dump image: iStock (illustrative photo).</li>
      <li>About image: Pinterest image provided by student (used in preview).</li>
      <li>Before/After images: DCMGA & The Guardian (illustrative).</li>
    </ul>

    <p>Other sources: Wikipedia ‚Äî recycling, pollution, composting; WWF, Greenpeace, local govt pages for disposal rules and drop-off points.</p>

    <h3 style="margin-top:14px;">Quick resources list</h3>
    <div class="grid">
      <div class="card">How to separate waste (printable checklist)</div>
      <div class="card">Composting starter guide (step-by-step)</div>
      <div class="card">Local e-waste drop-off (contacts)</div>
      <div class="card">Water-saving checklist (home tips)</div>
    </div>

    <p style="margin-top:12px; font-size:.95rem;"><strong>Note:</strong> If you include images from specific photographers or articles in your submission, add direct URLs here to give full credit.</p>
  </section>

  <!-- QUIZ -->
  <section id="quiz" class="page hidden" aria-hidden="true">
    <h2>10-Question Eco Quiz (randomized)</h2>
    <p>Multiple choice: A / B / C / D. <strong>God bless you! ‚ú®</strong></p>

    <div id="quizContainer" class="hidden" style="margin-top:12px;">
      <p id="progress" aria-live="polite"></p>
      <p id="question-text" style="font-weight:700; margin-top:6px;"></p>
      <div class="quiz-btns" style="margin-top:8px;">
        <button id="btnA" class="choice" data-choice="A">A</button>
        <button id="btnB" class="choice" data-choice="B">B</button>
        <button id="btnC" class="choice" data-choice="C">C</button>
        <button id="btnD" class="choice" data-choice="D">D</button>
      </div>
      <p id="feedback" aria-live="polite"></p>
    </div>

    <div class="center" style="margin-top:12px;">
      <p style="font-size:.98rem; color:#333;"><em>To unlock the quiz, read the Reviewer first and press Proceed.</em></p>
    </div>
  </section>
</main>

<footer>
  <span class="footer-credits cartoon">Credits: Wikipedia ‚Ä¢ Unsplash ‚Ä¢ Local waste & recycling guides ‚Ä¢ Environmental NGOs ‚Ä¢ Your creativity üåü</span>
</footer>

<!-- AUDIO: click SFX from Google Drive direct-download link -->
<audio id="clickSfx" preload="auto" src="https://drive.google.com/uc?export=download&id=1xasZU76kkQMjQfKxOBYTbjfZvDa6TU2j"></audio>

<script>
// ===== GLOBAL STATE =====
const pages = document.querySelectorAll('.page');
let quizInProgress = false;
let currentQuiz = [], score = 0, index = 0;

// ===== SFX SETUP =====
const sfxEl = document.getElementById('clickSfx');
// small debounce to avoid double-play on touch+click
let _lastSfx = 0;
function playSfx(){
  try{
    const now = Date.now();
    if(now - _lastSfx < 180) return; // ignore too-fast repeats
    _lastSfx = now;
    sfxEl.currentTime = 0;
    const p = sfxEl.play();
    if(p && p.catch) p.catch(()=>{ /* ignore autoplay errors */ });
  }catch(e){
    // fail silently
  }
}

// play sfx when any enabled <button> is pressed (click or touchend)
document.addEventListener('click', (e)=>{
  const btn = e.target.closest('button');
  if(btn && !btn.disabled) playSfx();
});
document.addEventListener('touchend', (e)=>{
  const btn = e.target.closest('button');
  if(btn && !btn.disabled) playSfx();
}, {passive:false});

// ===== mobile-friendly helpers =====
function showWarning(){
  const warning = document.getElementById('warningPopup');
  // show bottom popup
  warning.classList.add('show');
  warning.setAttribute('aria-hidden', 'false');
  setTimeout(()=>{
    warning.classList.remove('show');
    warning.setAttribute('aria-hidden', 'true');
  }, 2200);
}
function showStar(){
  const star = document.getElementById('star');
  star.classList.add('bounce');
  star.style.opacity = '1';
  setTimeout(()=>{ star.classList.remove('bounce'); star.style.opacity='0'; }, 800);
}

// show/hide page
function showPage(id){
  if(quizInProgress && id !== 'quiz'){
    showWarning();
    return;
  }
  pages.forEach(p=>{
    const hidden = p.id !== id;
    if(hidden){ p.classList.add('hidden'); p.setAttribute('aria-hidden','true'); }
    else { p.classList.remove('hidden'); p.removeAttribute('aria-hidden'); }
  });
  window.scrollTo({ top: 0, behavior: 'instant' });
}

// ===== NAV: attach both click & touchend handlers =====
function attachNavHandlers(){
  const mapping = {
    'nav-home':'home',
    'nav-about':'about',
    'nav-reviewer':'reviewer',
    'nav-resources':'resources',
    'nav-quiz':'quiz'
  };
  Object.entries(mapping).forEach(([btnId,pageId])=>{
    const btnElem = document.getElementById(btnId);
    if(!btnElem) return;
    btnElem.replaceWith(btnElem.cloneNode(true)); // clear old listeners
    const btn = document.getElementById(btnId);
    const handler = (e)=>{
      if(e.type === 'touchend') e.preventDefault();
      showPage(pageId);
    };
    btn.addEventListener('click', handler, {passive:false});
    btn.addEventListener('touchend', handler, {passive:false});
    btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') showPage(pageId); });
  });
}

// ===== QUIZ QUESTIONS =====
const questions = [
  {q:"You see trash on the sidewalk, what will you do?", A:"Pick them up", B:"Leave it there", C:"Put them in the trash", D:"Add more trash", answer:"C"},
  {q:"Which of these is recyclable?", A:"Paper", B:"Food scraps", C:"Plastic bag with food", D:"Used tissue", answer:"A"},
  {q:"Best way to save water?", A:"Leave taps running", B:"Fix leaks", C:"Wash car daily", D:"Water plants at noon", answer:"B"},
  {q:"Renewable energy source?", A:"Coal", B:"Oil", C:"Solar", D:"Natural gas", answer:"C"},
  {q:"Action to reduce carbon footprint?", A:"Walk instead of driving", B:"Drive everywhere", C:"Use single-use plastics", D:"Burn leaves", answer:"A"},
  {q:"Composting is for?", A:"Plastic waste", B:"Organic waste", C:"Metal cans", D:"Glass bottles", answer:"B"},
  {q:"Eco-friendly shopping?", A:"Using reusable bags", B:"Plastic bags every time", C:"Ignore recycling", D:"Buy single-use items", answer:"A"},
  {q:"E-waste should?", A:"Throw in trash", B:"Burn it", C:"Recycle properly", D:"Leave outside", answer:"C"},
  {q:"Best time to water plants?", A:"Midday", B:"Night", C:"Early morning", D:"Evening", answer:"C"},
  {q:"Action that reduces pollution?", A:"Carpooling", B:"Drive alone", C:"Burn trash", D:"Use aerosol sprays", answer:"A"}
];

// ===== QUIZ DOM helpers (attach click & touch handlers for choices) =====
function ensureQuizDOM(){
  const container = document.getElementById('quizContainer');
  if(!container) return;
  if(!document.getElementById('btnA')){
    container.innerHTML = `
      <p id="progress" aria-live="polite"></p>
      <p id="question-text" style="font-weight:700; margin-top:6px;"></p>
      <div class="quiz-btns" style="margin-top:8px;">
        <button id="btnA" class="choice" data-choice="A">A</button>
        <button id="btnB" class="choice" data-choice="B">B</button>
        <button id="btnC" class="choice" data-choice="C">C</button>
        <button id="btnD" class="choice" data-choice="D">D</button>
      </div>
      <p id="feedback" aria-live="polite"></p>
    `;
  }
  attachChoiceHandlers();
}

function attachChoiceHandlers(){
  ['A','B','C','D'].forEach(letter=>{
    const old = document.getElementById('btn'+letter);
    if(!old) return;
    old.replaceWith(old.cloneNode(true));
  });
  ['A','B','C','D'].forEach(letter=>{
    const btn = document.getElementById('btn'+letter);
    if(!btn) return;
    const handler = (e)=>{
      if(e.type === 'touchend') e.preventDefault();
      handleChoice(btn.dataset.choice);
    };
    btn.addEventListener('click', handler, {passive:false});
    btn.addEventListener('touchend', handler, {passive:false});
    btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') handleChoice(btn.dataset.choice); });
  });
}

function handleChoice(choice){
  const q = currentQuiz[index];
  if(!q) return;
  if(choice === q.answer){
    score++;
    document.getElementById('feedback').textContent = "‚úÖ Correct!";
    showStar();
  } else {
    document.getElementById('feedback').textContent = "‚ùå Wrong! It's okay! Learn and try again!";
  }
  document.querySelectorAll('.quiz-btns button').forEach(b=>b.disabled=true);
  index++;
  setTimeout(()=> {
    if(index < currentQuiz.length) showQuestion();
    else finishQuiz();
  }, 900);
}

// ===== Reviewer proceed/back bindings (touch + click) =====
function setupReviewerControls(){
  const backBtn = document.getElementById('backHomeFromReviewer');
  if(backBtn){
    const back = (e)=>{ if(e.type==='touchend') e.preventDefault(); showPage('home'); };
    backBtn.addEventListener('click', back, {passive:false});
    backBtn.addEventListener('touchend', back, {passive:false});
  }
  const readCheck = document.getElementById('read-check');
  const proceedBtn = document.getElementById('proceedBtn');
  if(readCheck && proceedBtn){
    readCheck.addEventListener('change', ()=> proceedBtn.disabled = !readCheck.checked );
    const proceed = (e)=>{ if(e.type==='touchend') e.preventDefault(); showPage('quiz'); document.getElementById('quizContainer').classList.remove('hidden'); startQuiz(); };
    proceedBtn.addEventListener('click', proceed, {passive:false});
    proceedBtn.addEventListener('touchend', proceed, {passive:false});
  }
}

// ===== QUIZ flow =====
function startQuiz(){
  quizInProgress = true;
  currentQuiz = [...questions].sort(()=> Math.random() - 0.5);
  score = 0; index = 0;
  ensureQuizDOM();
  showQuestion();
}

function showQuestion(){
  const q = currentQuiz[index];
  document.getElementById('progress').textContent = `Question ${index+1}/${currentQuiz.length}`;
  document.getElementById('question-text').textContent = q.q;
  document.getElementById('btnA').textContent = `A. ${q.A}`;
  document.getElementById('btnB').textContent = `B. ${q.B}`;
  document.getElementById('btnC').textContent = `C. ${q.C}`;
  document.getElementById('btnD').textContent = `D. ${q.D}`;
  document.querySelectorAll('.quiz-btns button').forEach(b=>b.disabled=false);
  document.getElementById('feedback').textContent = '';
}

function finishQuiz(){
  quizInProgress = false;
  const container = document.getElementById('quizContainer');
  container.innerHTML = `
    <h3>üéâ Quiz Finished! Your score: ${score}/${currentQuiz.length}</h3>
    <div style="margin-top:10px;">
      <button id="restartQuiz">Restart Quiz</button>
      <button id="goHome" style="margin-left:8px; background:#555;">Back to Home</button>
    </div>
    <p style="margin-top:10px; font-size:.95rem; color:#333;">Tip: Re-open Reviewer to read the mini lessons again and try to improve your score.</p>
  `;
  const restart = document.getElementById('restartQuiz');
  const goHome = document.getElementById('goHome');
  restart.addEventListener('click', (e)=>{ if(e.type==='touchend') e.preventDefault(); restartQuizStart(); });
  restart.addEventListener('touchend', (e)=>{ e.preventDefault(); restartQuizStart(); }, {passive:false});
  goHome.addEventListener('click', ()=> showPage('home') );
  goHome.addEventListener('touchend', (e)=>{ e.preventDefault(); showPage('home'); }, {passive:false});
}

// restart that immediately restarts
function restartQuizStart(){
  ensureQuizDOM();
  showPage('quiz');
  document.getElementById('quizContainer').classList.remove('hidden');
  currentQuiz = [...questions].sort(()=> Math.random() - 0.5);
  score = 0; index = 0; quizInProgress = true;
  attachChoiceHandlers();
  showQuestion();
}

// ===== Init everything =====
function init(){
  attachNavHandlers();
  ensureQuizDOM();
  setupReviewerControls();
  showPage('home');
}
init();
</script>
</body>
</html>


